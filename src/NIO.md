# IO와 NIO의 차이

|구분|IO|NIO|
|------|---|---|
|입출력 방식|스트림 방식(단방향)|채널 방식(양방향)|
|버퍼 방식|논버퍼|버퍼|
|비동기 방식|지원 안 함|지원|

## 스트림과 채널
### 스트림
- 입력 스트림과 출력 스트림으로 구분되어 있다.
- 따라서 데이터를 읽고 쓰기 위해서는 입력, 출력 스트림을 각각 따로 생성해야 한다.

### 채널
- 양방향으로 입출력이 가능하다. 
- 입력과 출력을 위해 따로 채널을 만들 필요없이 하나의 채널로 입출력을 할 수 있다.

## 논버퍼와 버퍼
### 논버퍼 
- IO에서 출력스트림이 1바이트를 쓰면 입력스트림이 1바이트를 읽는다. 속도가 느릴 수 밖에 없는 구조이다.
- 그래서 버퍼를 제공해주는 BufferedInputStream, BufferedOutputStream을 연결해서 사용한다.
- IO는 스트림에서 입력된 데이터를 별도로 저장하지 않으면 입력된 데이터의 위치를 이동해 가며 자유롭게 읽을 수 있다.

### 버퍼 
- 버퍼를 사용하게 되면 IO보다 입출력에서 성능이 좋고 채널은 버퍼에 저장된 데이터를 출력하고 입력된 데이터를 버퍼에 저장한다.
- NIO는 읽은 데이터는 무조건 버퍼에 저장하기 때문에 버퍼 내에서만 데이터의 위치를 이동해가며 필요한 부분만 읽을 수 있다.
#### 논다이렉트 버퍼와 다이렉트 버퍼
|구분|넌다이렉트버퍼|다이렉트버퍼|
|---|---|---|
|사용하는 메모리 공간|JVM Heap 메모리|운영체제의 메모리|
|버퍼 생성 시간|빠름|느림|
|버퍼의 크기|작음|큼(큰 데이터 처리에 유리)|
|입출력 성능|낮음|높은(빈번한 입출력에 유리)|


## IO와 NIO의 선택
- NIO는 쓰레드풀을 사용하여 비동기로 처리할 수 있기 때문에 쓰레드를 효과적으로 재사용할 수 있다는 점과
- OS의 버퍼를 이용한 입출력이 가능하기 때문에 입출력 성능에서의 장점이 있다.
- 하지만 대용량 데이터일 경우 NIO 버퍼 크기가 문제가 될 수 있다.

- 따라서 NIO는 처리 작업의 수가 많지만 작업 시간이 오래 걸리지 않는 경우에 사용하는 것이 좋고
- IO는 처리 작업의 수가 적고 데이터가 대용량이면서 순차적으로 처리될 필요가 있는 경우에 사용하는 것이 좋다.